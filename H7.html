<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IndexedDB Demo</title>
</head>
<body>
    <h1>IndexedDB Example</h1>
    <button onclick="addData()">Add Data</button>
    <button onclick="getData()">Get Data</button>
    <script>
        let db;
        document.addEventListener('DOMContentLoaded', () => {
            const request = indexedDB.open('myDatabase', 1);

            request.onerror = function(event) {
                console.error('Database error:', event.target.errorCode);
            };

            request.onsuccess = function(event) {
                db = event.target.result;
                console.log('Database opened successfully');
            };

            request.onupgradeneeded = function(event) {
                db = event.target.result;
                if (!db.objectStoreNames.contains('myStore')) {
                    const objectStore = db.createObjectStore('myStore', { keyPath: 'id' });
                    console.log('Object store created successfully');
                }
            };
        });

        function addData() {
            if (!db) {
                console.error('Database is not initialized');
                return;
            }

            const transaction = db.transaction(['myStore'], 'readwrite');
            const objectStore = transaction.objectStore('myStore');
            const data = { id: '1', name: 'Sample Data' };
            const request = objectStore.add(data);

            request.onsuccess = function(event) {
                console.log('Data added successfully');
            };

            request.onerror = function(event) {
                console.error('Error adding data:', event.target.errorCode);
            };
        }

        function getData() {
            if (!db) {
                console.error('Database is not initialized');
                return;
            }

            const transaction = db.transaction(['myStore'], 'readonly');
            const objectStore = transaction.objectStore('myStore');
            const request = objectStore.get('1');

            request.onsuccess = function(event) {
                if (request.result) {
                    console.log('Data retrieved:', request.result);
                } else {
                    console.log('No data found');
                }
            };

            request.onerror = function(event) {
                console.error('Error retrieving data:', event.target.errorCode);
            };
        }
    </script>
</body>
</html>
